<div class="product-list-wrapper">

  <!-- Page Header -->
  <div class="page-header">
    <h2>Products</h2>
    <a routerLink="/products/add" class="add-product">âž• Add Product</a>
  </div>

  <!-- Products Grid -->
  <div class="products-grid">
    <div *ngFor="let p of products" class="product-card">

      <ng-container *ngIf="editingProduct?.id === p.id; else viewMode">

        <!-- Edit Mode -->
        <input [(ngModel)]="editingProduct.name" placeholder="Product Name" class="edit-input" />

        <select [(ngModel)]="editingProduct.categoryId">
          <option value="">Select Category</option>
          <option *ngFor="let c of categories" [value]="c.id">{{ c.name }}</option>
        </select>

        <select [(ngModel)]="editingProduct.subcategoryId">
          <option value="">Select Subcategory</option>
          <option *ngFor="let s of filteredSubcategories()" [value]="s.id">
            {{ s.name }}
          </option>
        </select>

        <input type="number" [(ngModel)]="editingProduct.stock" placeholder="Stock" />

        <div class="edit-actions">
          <button (click)="saveEdit()" [disabled]="loading">ðŸ’¾ Save</button>
          <button (click)="cancelEdit()">âœ– Cancel</button>
        </div>

      </ng-container>

      <ng-template #viewMode>
        <!-- View Mode -->
        <div class="product-name">
          {{ p.name }}
          <span class="action-icons">
            <button (click)="startEdit(p)" title="Edit">
              <i class="pi pi-pencil"></i>
            </button>
            <button (click)="delete(p.id)" title="Delete">
              <i class="pi pi-trash"></i>
            </button>
          </span>
        </div>

        <div *ngIf="p.subcategoryName" class="product-subcategory">
          {{ p.subcategoryName }}
        </div>

        <div class="product-stock">
          Stock: {{ p.stock }}
        </div>
      </ng-template>

    </div>
  </div>

  <!-- Pagination -->
  <p-paginator
    [rows]="10"
    [totalRecords]="products.length"
    [rowsPerPageOptions]="[5,10,20]"
    styleClass="custom-paginator"
  ></p-paginator>

</div>
